<link rel="stylesheet" href="menu-style.css">

<div id="sidebar">
  <h2>âš¡ Admin Panel</h2>

  <!-- Core dashboard -->
  <a href="#" data-page="dashboard.html">ğŸ  Dashboard</a>

  <!-- Form pages -->
  <a href="#" data-page="form_builder.html">ğŸ“ Form Builder</a>
  <a href="#" data-page="forms.html">ğŸ’¾ Forms</a>
  <a href="#" data-page="generate.html">âš™ï¸ Generate</a>

  <!-- Members / links -->
  <a href="#" data-page="members.html">ğŸ‘¥ Members</a>
  <a href="#" data-page="links.html">ğŸ”— Links</a>

  <!-- Feedback / victims -->
  <a href="#" data-page="feedback.html">ğŸ’¬ Feedback</a>
  <a href="#" data-page="victims.html">ğŸ‘€ View Victims</a>

  <!-- Payments / popups -->
  <a href="#" data-page="payment.html">ğŸ’° Payment</a>
  <a href="#" data-page="popup-emergency.html">ğŸš¨ Emergency Popup</a>

  <!-- Authentication / admin -->
  <a href="#" data-page="login.html">ğŸ”‘ Login</a>
  <a href="logout.html" class="logout">ğŸšª Logout</a>

  <!-- Sidebar toggle button for mobile -->
  <a href="#" id="sidebarToggle" style="margin-top:20px;">â˜° Toggle Menu</a>
</div>

<script>
  const sidebar = document.getElementById('sidebar');
  const links = document.querySelectorAll('#sidebar a[data-page]');
  const dashboardFrame = window.parent.document.getElementById('dashboardFrame');

  // Load page into iframe
  function loadPage(page) {
    if (!dashboardFrame) {
      console.error('dashboardFrame not found');
      return;
    }
    dashboardFrame.src = page;

    // Highlight active link
    links.forEach(l => l.classList.remove('active'));
    const active = Array.from(links).find(l => l.dataset.page === page);
    if (active) active.classList.add('active');
  }

  // Click handling for menu links
  links.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const page = link.dataset.page;
      loadPage(page);

      // Close sidebar on mobile
      if (window.innerWidth < 768) sidebar.style.transform = 'translateX(-100%)';
    });
  });

  // Sidebar toggle button
  const toggleBtn = document.getElementById('sidebarToggle');
  toggleBtn.addEventListener('click', e => {
    e.preventDefault();
    if (sidebar.style.transform === 'translateX(0%)') {
      sidebar.style.transform = 'translateX(-100%)';
    } else {
      sidebar.style.transform = 'translateX(0%)';
    }
  });

  // Apply mobile transform by default if small screen
  if (window.innerWidth < 768) sidebar.style.transform = 'translateX(-100%)';

  // Optional: load default page
  loadPage('dashboard.html');
</script>

<style>
  /* Active link highlight */
  #sidebar a.active {
    background: #111;
    color: lime;
    font-weight: bold;
  }

  /* Mobile sidebar transition */
  #sidebar {
    transition: transform 0.3s ease-in-out;
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    overflow-y: auto;
    z-index: 1000;
  }

  @media(min-width: 768px) {
    #sidebar {
      transform: translateX(0%) !important;
    }
    #sidebarToggle { display: none; }
  }
</style>
