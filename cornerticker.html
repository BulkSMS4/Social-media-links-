<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸš¨ Corner Emergency Ticker</title>

<style>
  body {
    margin: 0;
    background: transparent;
    overflow: hidden;
  }

  #cornerTicker {
    position: fixed;
    top: 12px;
    right: -100%;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    border-radius: 10px 0 0 10px;
    font-family: Arial, sans-serif;
    font-weight: bold;
    font-size: 15px;
    white-space: nowrap;
    z-index: 99999;
    animation: slideLeft 1s forwards;
    box-shadow: 0 0 12px rgba(0,0,0,0.5);
  }

  /* ðŸš¨ flashing light */
  .flashLight {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: red;
    animation: flashColor 1s infinite;
    box-shadow: 0 0 8px red;
  }

  @keyframes flashColor {
    0% { background: red; box-shadow: 0 0 8px red; }
    33% { background: yellow; box-shadow: 0 0 8px yellow; }
    66% { background: white; box-shadow: 0 0 8px white; }
    100% { background: red; box-shadow: 0 0 8px red; }
  }

  @keyframes scrollLeft {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
  }

  @keyframes slideLeft {
    from { right: -100%; }
    to { right: 0; }
  }

  #tickerText {
    display: inline-block;
    padding-left: 100%;
  }
</style>
</head>
<body>

<div id="cornerTicker" style="display:none;">
  <div class="flashLight"></div>
  <div id="tickerText"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyB5zWUvl64s6wAjjeXd0mCUyhMEdzg_MmM",
    authDomain: "usahackersland.firebaseapp.com",
    projectId: "usahackersland",
    storageBucket: "usahackersland.appspot.com",
    messagingSenderId: "588407428267",
    appId: "1:588407428267:web:7c4898cbb62efd3d5953ee"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const docRef = db.collection('emergency').doc('current');
  const ticker = document.getElementById('cornerTicker');
  const tickerText = document.getElementById('tickerText');

  // Realtime listener
  docRef.onSnapshot(doc => {
    if (!doc.exists) {
      ticker.style.display = 'none';
      return;
    }
    const data = doc.data();
    const message = data.text || '';
    if (!message.trim()) {
      ticker.style.display = 'none';
      return;
    }

    const color = data.color || '#ff3333';
    const bg = data.bgColor || '#ffffff';
    const speed = Number(data.speedSec || 18);

    ticker.style.display = 'flex';
    ticker.style.background = bg;
    tickerText.style.color = color;
    tickerText.textContent = message;
    tickerText.style.animation = `scrollLeft ${speed}s linear infinite`;
  });
</script>

</body>
</html>
